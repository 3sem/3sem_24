## Задача 6: фоновая служба мониторинга

![alt text](https://cs14.pikabu.ru/post_img/2021/12/20/9/1640012616124461541.jpg)

Разработать программу-демон, которая:

### Вариант 1

1) Находит процесс по его PID (изначально заданный через аругменты командной строки), читает его рабочую директорию и запись на procfs /proc/<pid name>

2) Выполняет следующее:

просматривает рабочую директорию процесса, находит в ней изменения только в текстовых файлах (см. пример на diff + подумайте, 
как программно определить, что файл текстовый, используя утилиту file), после чего сохраняет их (только изменения), то есть делает бекап.
Поддержать инкрементальные бекапы (сохраняем только последовательности diff-ов и временную отметку создания,
потом их последовательно накатываем на исходные или конечные состояния состояния файлов). При первом обращении разрешается сделать полный бекап всех регулярных текстовых файлов.
При этом предпочтительно (но не обязательно) сделать обратные диффы, чтобы историю изменений можно было проиграть от конца к началу.

Варианты поиска измененных файлов: 1) stat на элементах списка файлов директорной записи 2) подписка на события inotify (подумайте, как просматривать только изменения/удаления/создания файлов через inotify)




### Вариант 2
1) Находит процесс по его PID (изначально заданный через аругменты командной строки), читает его запись на procfs /proc/<pid name>

2) Выполняет следующее:

читает proc/<pid name>/maps -- отображения в память процесса. Записывает изменения (каждый семпл -- только изменения/удаления/добавления отображений) в тех именах, на которые указывают ссылки из maps. После чего сохраняет их. Поддержать инкрементальное хранение семплов (сохраняем только последовательности diff-ов и временную отметку создания, потом их последовательно накатываем на исходные или конечные состояния семплов). При этом предпочтительно (но не обязательно) сделать обратные диффы, чтобы историю изменений можно было проиграть от конца к началу.

### Требования к оформлению мониторинга

В любом из вариантов, демон должен сохранять данные в виде периодических семплов, то есть делать одну запись в T мс, где T - период семплирования, задаваемый
демону через некоторый канал IPC взаимодействия с ним (например, FIFO). Кроме того, этот через этот канал демону можно передавать команды для:
- вывода текущего диффа
- вывод k диффов за k-e число семплов назад
- изменение PID просматриваемого процесса
- что-то ещё, что-то ещё, что пригодится Вам в работе ...

Демон должен быть отвязан от управляющего терминала и быть защищённым от нежелательных сигналов и каналов ввода/вывода. 
Демон должен запускаться с опцией -d. В случае указания опции -i либо без -i/d, программа должна работать в интерактивном режиме.
На приёме также будет производиться контроль утечки ресурсов.

Красивая визуализация проигрывания истории -- по усмотрению автора, для общего впечатления
